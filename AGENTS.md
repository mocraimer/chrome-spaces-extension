# Repository Guidelines

## Project Structure & Module Organization
Source lives in `src`, organized by surface: `background`, `options`, `popup`, `devtools`, and cross-cutting helpers in `shared`. Local test harnesses stay in `src/tests` (unit, integration, mocks), while Playwright specs are in `e2e-tests` and Cucumber feature definitions in `features`. Extension metadata and static assets reside in `manifest.json`, `icons/`, and `docs/` covers architecture notes and API references.

## Build, Test, and Development Commands
- `npm run dev` – clean then bundle to `build/` with hot-friendly settings for rapid iteration.
- `npm run build` – create the production bundle; pair with `npm run build:zip` before store submission.
- `npm run watch` – rebuild on file changes without clearing the output.
- `npm test` | `npm run test:watch` – run Jest unit/integration suites; watch mode autorestarts on save.
- `npm run test:e2e` | `npm run test:bdd` – execute Playwright or Cucumber flows; append `:report` for an HTML report.
- `npm run lint` / `npm run format` – enforce ESLint rules and Prettier formatting across TypeScript and assets.

## Coding Style & Naming Conventions
Use TypeScript with React functional components and hooks; implicit `@/` alias resolves to `src/`. Prettier enforces two-space indentation, single quotes, and trailing commas—run the formatter before committing. Name components and files in PascalCase (`EnhancedPopup.tsx`), hooks as `useSomething`, and utility modules in camelCase; keep test files suffixed with `.spec.ts` or `.test.tsx`.

## Testing Guidelines
Unit and integration tests live under `src/tests/unit` and `src/tests/integration` and run via Jest with `ts-jest`. Maintain or raise coverage; add regressions tests alongside code and mock Chrome APIs using `src/tests/mocks`. End-to-end journeys use Playwright specs in `e2e-tests` and Gherkin features in `features`; tag smoke scenarios with `@smoke` and execute with `npm run test:bdd:smoke` before releasing.

## Commit & Pull Request Guidelines
Follow lightweight Conventional Commit prefixes (`feat:`, `fix:`, `chore:`) for clarity; scope optional but encouraged (`feat(popup):`). Commits should be focused and include any relevant screenshots or artifacts in PR descriptions, especially UI changes or new cucumber reports. Open PRs with a short summary, link Jira/GitHub issues, list testing evidence (`npm test`, `npm run test:e2e`), and call out configuration changes affecting `manifest.json` or permissions.

## Extension Packaging & Configuration
Webpack configuration lives in `webpack.config.ts`; adjust environment-specific tweaks there and mirror changes in `tsconfig.json` when path aliases shift. Before publishing, verify `manifest.json` version, clear `build/`, rerun `npm run build`, and attach the zipped artifact generated by `npm run build:zip`.
